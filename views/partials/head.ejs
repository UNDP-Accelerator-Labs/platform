<%
	// CREATE ALIASES
	const language = locals.metadata.page.language
	const title = locals.metadata?.page?.title
	const description = locals.metadata?.site?.description[language]

	const site_title = locals?.data?.publishable ? locals?.data?.title : null

	const site_description = locals?.data?.publishable ? locals?.data?.sections?.[0]?.items?.find(c => c?.type === 'txt'  && c?.txt?.length)?.txt : null;
	const img = locals?.data?.publishable ? locals?.data?.sections[0]?.items?.find(c => c?.type === 'img' && c?.src?.length )?.src : null
	const activity = locals.metadata.page.activity
	const is_public = locals.metadata.page.public || activity === 'preview'

	let ogp_locale = 'en_US'


	if(language == 'fr'){
		ogp_locale = 'fr_FR'
	}
	else if (language == 'es'){
		ogp_locale = 'es_ES'
	}
	else if(language == 'pt'){
		ogp_locale = 'pt_PT'
	}

%>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, height=device-height, initial-scale=1.0, target-densitydpi=device-dpi'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta names='apple-mobile-web-app-status-bar-style' content='black-translucent'>
<meta name="theme-color" content="#16a0d6e7"/>

<!-- OGP tags -->
<meta property="og:title" content="<%= title %>">
<meta property="og:description" content="<%= site_description ?? description %>">
<meta property="og:locale" content="<%= ogp_locale %>">
<meta property="og:site_name" content="<%= site_title ?? title %>">

<meta property="og:image" content="<%= img ?? 'https://undp-accelerator-labs.github.io/national_innovation_ecosystems_toolkit/public/imgs/UNDP_accelerator_labs_logo_vertical_color_RGB.png' %>"/>
<meta property="og:image:secure_url" content="<%= img ?? 'https://undp-accelerator-labs.github.io/national_innovation_ecosystems_toolkit/public/imgs/UNDP_accelerator_labs_logo_vertical_color_RGB.png' %>"/>
<meta property="og:image:width" content="400" />

<meta property="og:image:alt" content="UNDP Accelerator Labs" />


<title><%- title %></title>

<script type='text/javascript' src='/scripts/d3/dist/d3.min.js'></script>
<script type='text/javascript' src='/scripts/d3-selection-multi/build/d3-selection-multi.min.js'></script>

<script type='text/javascript' src='/scripts/uuid/dist/umd/uuidv4.min.js'></script>

<script type='text/javascript' src='/js/d3.prototype.extensions.js'></script>
<script type='text/javascript' src='/js/String.prototype.extensions.js'></script>
<script type='text/javascript' src='/js/Math.extensions.js'></script>
<script type='text/javascript' src='/js/Array.prototype.extensions.js'></script>
<script type='text/javascript' src='/js/Date.prototype.extensions.js'></script>
<script type='text/javascript' src='/js/basics.js'></script>
<script type='text/javascript' src='/js/upload.js'></script>

<!-- Google Translate CDN -->
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<!-- <script src = '/socket.io/socket.io.js'></script> -->

<link rel='stylesheet' href='https://unpkg.com/leaflet@1.6.0/dist/leaflet.css'
	integrity='sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=='
	crossorigin=''/>
<script src='https://unpkg.com/leaflet@1.6.0/dist/leaflet.js'
	integrity='sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=='
	crossorigin=''></script>

<link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined'>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link rel='stylesheet' type='text/css' href='/css/dispatch.css'>

<script type="text/javascript">
	var languageAlias = '<%= language %>';
	var isPublic = '<%- is_public %>' === 'true'
	var googleTranslateElement;
	
	function setCookie(key, value, expiry) {
	  var expires = new Date();
	  expires.setTime(expires.getTime() + (expiry * 24 * 60 * 60 * 1000));
	  document.cookie = key + '=' + value + ';expires=' + expires.toUTCString();
	}
	function googleTranslateElementInit() {
		if(languageAlias !== 'en'){
			setCookie('GoogleAccountsLocale_session', `${languageAlias}`);
			setCookie('googtrans', `/en/${languageAlias}`,1);
		}

		new google.translate.TranslateElement({
		   pageLanguage: 'en',
		   layout: google.translate.TranslateElement.InlineLayout.SIMPLE
		}, 'google_translate_element');

	}

</script>

